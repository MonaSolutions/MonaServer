<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Installation &mdash; MonaServer 1 documentation</title>
    
    <link rel="stylesheet" href="_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootswatch-3.1.0/cerulean/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/my-styles.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="MonaServer 1 documentation" href="index.html" />
    <link rel="next" title="Server Application" href="serverapp.html" />
    <link rel="prev" title="Samples" href="samples.html" />

  <a href="https://github.com/MonaSolutions/MonaServer"
     class="visible-desktop hidden-xs"><img
    id="gh-banner"
    style="position: absolute; top: 50px; right: 0; border: 0;"
    src="_static/githubBlack.png"
    alt="Fork us on GitHub"></a>
  <script>
    // Adjust image position with banner height
    $(function () {
      var navHeight = $(".navbar .container").css("height");
      $("#gh-banner").css("top", navHeight);
    });
  </script>

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="index.html">
          MonaServer</a>
        <span class="navbar-text navbar-version pull-left"><b>1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            <li class="divider-vertical"></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="samples.html">Samples</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="serverapp.html">Server Application</a></li>
<li class="toctree-l1"><a class="reference internal" href="scalability.html">Scalability and load-balancing</a></li>
<li class="toctree-l1"><a class="reference internal" href="serversocket.html">Server Application Sockets</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Mona Server&#8217;s lua API</a></li>
<li class="toctree-l1"><a class="reference internal" href="protocols.html">Specific Protocol Functionalities</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">The MonaServer Database System</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Installation</a><ul>
<li><a class="reference internal" href="#binaries">Binaries</a></li>
<li><a class="reference internal" href="#download">Download</a></li>
<li><a class="reference internal" href="#build">Build</a><ul>
<li><a class="reference internal" href="#dependencies-and-requirements">Dependencies and requirements</a></li>
<li><a class="reference internal" href="#luajit-installation">LuaJIT installation</a></li>
<li><a class="reference internal" href="#windows-build">Windows Build</a></li>
<li><a class="reference internal" href="#unix-linux-osx-build">Unix (Linux/OSX) Build</a></li>
<li><a class="reference internal" href="#amazon-ec2-ami-build">Amazon EC2 AMI Build</a></li>
<li><a class="reference internal" href="#raspberry-pi-armv61-build">Raspberry PI (armv61) Build</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configurations">Configurations</a><ul>
<li><a class="reference internal" href="#application">[application]</a></li>
<li><a class="reference internal" href="#servers">[servers]</a></li>
<li><a class="reference internal" href="#rtmfp">[RTMFP]</a></li>
<li><a class="reference internal" href="#rtmp">[RTMP]</a></li>
<li><a class="reference internal" href="#http">[HTTP]</a></li>
<li><a class="reference internal" href="#websocket">[WebSocket]</a></li>
<li><a class="reference internal" href="#logs">[logs]</a></li>
<li><a class="reference internal" href="#sample-of-monaserver-ini">Sample of MonaServer.ini</a></li>
</ul>
</li>
<li><a class="reference internal" href="#launch">Launch</a><ul>
<li><a class="reference internal" href="#start">Start</a></li>
<li><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="samples.html" title="Previous Chapter: Samples"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Samples</span>
    </a>
  </li>
  <li>
    <a href="serverapp.html" title="Next Chapter: Server Application"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Server Applicati... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm">
<div id="sourcelink">
  <a href="_sources/installation.txt"
     rel="nofollow">Source</a>
</div></li>
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="installation">
<h1><a class="toc-backref" href="#id4">Installation</a><a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h1>
<p>We would like to remind you that Mona is licensed under the <a class="reference external" href="http://www.gnu.org/licenses/">GNU General Public License</a>, so <strong>MonaBase can&#8217;t be linked with any closed source project.</strong>.</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#installation" id="id4">Installation</a><ul>
<li><a class="reference internal" href="#binaries" id="id5">Binaries</a></li>
<li><a class="reference internal" href="#download" id="id6">Download</a></li>
<li><a class="reference internal" href="#build" id="id7">Build</a><ul>
<li><a class="reference internal" href="#dependencies-and-requirements" id="id8">Dependencies and requirements</a></li>
<li><a class="reference internal" href="#luajit-installation" id="id9">LuaJIT installation</a></li>
<li><a class="reference internal" href="#windows-build" id="id10">Windows Build</a></li>
<li><a class="reference internal" href="#unix-linux-osx-build" id="id11">Unix (Linux/OSX) Build</a></li>
<li><a class="reference internal" href="#amazon-ec2-ami-build" id="id12">Amazon EC2 AMI Build</a></li>
<li><a class="reference internal" href="#raspberry-pi-armv61-build" id="id13">Raspberry PI (armv61) Build</a></li>
</ul>
</li>
<li><a class="reference internal" href="#configurations" id="id14">Configurations</a><ul>
<li><a class="reference internal" href="#application" id="id15">[application]</a></li>
<li><a class="reference internal" href="#servers" id="id16">[servers]</a></li>
<li><a class="reference internal" href="#rtmfp" id="id17">[RTMFP]</a></li>
<li><a class="reference internal" href="#rtmp" id="id18">[RTMP]</a></li>
<li><a class="reference internal" href="#http" id="id19">[HTTP]</a></li>
<li><a class="reference internal" href="#websocket" id="id20">[WebSocket]</a></li>
<li><a class="reference internal" href="#logs" id="id21">[logs]</a></li>
<li><a class="reference internal" href="#sample-of-monaserver-ini" id="id22">Sample of MonaServer.ini</a></li>
</ul>
</li>
<li><a class="reference internal" href="#launch" id="id23">Launch</a><ul>
<li><a class="reference internal" href="#start" id="id24">Start</a></li>
<li><a class="reference internal" href="#usage" id="id25">Usage</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="binaries">
<h2><a class="toc-backref" href="#id5">Binaries</a><a class="headerlink" href="#binaries" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="download">
<h2><a class="toc-backref" href="#id6">Download</a><a class="headerlink" href="#download" title="Permalink to this headline">¶</a></h2>
<p>You can download the entire sources with <a class="reference external" href="https://github.com/MonaSolutions/MonaServer/zipball/master">zipball</a> or by using a <a class="reference external" href="http://en.wikipedia.org/wiki/Git_(software)">GIT</a> Client with the following address: <a class="reference external" href="https://github.com/MonaSolutions/MonaServer.git">https://github.com/MonaSolutions/MonaServer.git</a>.</p>
</div>
<div class="section" id="build">
<h2><a class="toc-backref" href="#id7">Build</a><a class="headerlink" href="#build" title="Permalink to this headline">¶</a></h2>
<p>The Mona source code is cross-platform.</p>
<p>You <strong>must</strong> build Mona in the following order:
#. :  <strong>MonaBase</strong>,
#. :  <strong>MonaCore</strong>,
#. :  <strong>MonaServer</strong>.</p>
<div class="section" id="dependencies-and-requirements">
<h3><a class="toc-backref" href="#id8">Dependencies and requirements</a><a class="headerlink" href="#dependencies-and-requirements" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt>Mona has the following dependencies :</dt>
<dd><ul class="first last simple">
<li><a class="reference external" href="http://www.openssl.org/">OpenSSL</a> is required.</li>
<li><a class="reference external" href="http://luajit.org/">LuaJIT</a> is required.</li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference external" href="http://luajit.org/">LuaJIT</a> is an alternative to the official LUA interpreter. It works faster than LUA essentially because it compiles the LUA code to machine code during execution (see <a class="reference external" href="http://luajit.org/performance_x86.html">LuaJIT performance</a> about performance comparison).</p>
</div>
<p>As <strong>C++11</strong> is used in MonaServer you need to install a compiler which is compatible. At least <strong>gcc 4.8.2</strong> on Linux and VS 2013 on Windows.</p>
</div>
<div class="section" id="luajit-installation">
<h3><a class="toc-backref" href="#id9">LuaJIT installation</a><a class="headerlink" href="#luajit-installation" title="Permalink to this headline">¶</a></h3>
<p>For several reasons some functionalities of <strong>LUA 52</strong> are not allowed by default in luajit (like <strong>#</strong> or <strong>pairs()</strong>) so we recommend you to compile luajit by yourself and set the DLUAJIT_ENABLE_LUA52COMPAT option.</p>
<ul>
<li><dl class="first docutils">
<dt>First download the latest release of <a class="reference external" href="http://luajit.org/">LuaJIT</a> (here with git) :</dt>
<dd><div class="first last highlight-sh"><div class="highlight"><pre>git clone http://luajit.org/git/luajit-2.0.git
</pre></div>
</div>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>Then set the DLUAJIT_ENABLE_LUA52COMPAT option :</dt>
<dd><ul class="first last simple">
<li>On Linux just search DLUAJIT_ENABLE_LUA52COMPAT in <em>src/Makefile</em> and uncomment the line</li>
<li>On Windows search the line beginning with <em>&#64;set LJCOMPILE=cl /nologo /c /O2 /W3 /D_CRT_SECURE_NO_DEPRECATE</em> and add the <em>/DLUAJIT_ENABLE_LUA52COMPAT</em> option</li>
</ul>
</dd>
</dl>
</li>
<li><p class="first">Finally you can compile luajit (<em>make</em> or <em>src/msvcbuild.bat</em>)</p>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On Linux just run <strong>sudo make install</strong> to install luajit on the system.</p>
</div>
</div>
<div class="section" id="windows-build">
<h3><a class="toc-backref" href="#id10">Windows Build</a><a class="headerlink" href="#windows-build" title="Permalink to this headline">¶</a></h3>
<p>First follow the <a class="reference internal" href="#luajit-installation">LuaJIT installation</a> steps.</p>
<p>Visual Studio 2013 solution and project files are included.
It searches external libraries in <em>External/lib</em> folder and external includes in <em>External/include</em> folder in the root <em>Mona</em> folder.
So you must put <a class="reference external" href="http://www.openssl.org/">OpenSSL</a> and <a class="reference external" href="http://luajit.org/">LuaJIT</a> headers and libraries in these folders.
You can find <a class="reference external" href="http://www.openssl.org/">OpenSSL</a> binaries for windows on <a class="reference external" href="http://www.slproweb.com/products/Win32OpenSSL.html">Win32OpenSSL</a>.</p>
</div>
<div class="section" id="unix-linux-osx-build">
<h3><a class="toc-backref" href="#id11">Unix (Linux/OSX) Build</a><a class="headerlink" href="#unix-linux-osx-build" title="Permalink to this headline">¶</a></h3>
<p>First follow the <a class="reference internal" href="#luajit-installation">LuaJIT installation</a> steps.</p>
<p>If your Unix system includes a package manager you can quickly install <a class="reference external" href="http://www.openssl.org/">OpenSSL</a>. The package is usually named <em>libssl-dev</em>.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">You need to use the <em>-dev</em> version to get the header files required during Mona compilation.</p>
</div>
<p>To build Mona:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nb">cd </span>MonaBase
make
<span class="nb">cd</span> ../MonaCore
make
<span class="nb">cd</span> ../MonaServer
make
</pre></div>
</div>
<p>To clean:</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span><span class="nb">cd </span>MonaBase
<span class="nv">$ </span>make clean
<span class="nv">$ </span><span class="nb">cd</span> ../MonaCore
<span class="nv">$ </span>make clean
<span class="nv">$ </span><span class="nb">cd</span> ../MonaServer
<span class="nv">$ </span>make clean
</pre></div>
</div>
</div>
<div class="section" id="amazon-ec2-ami-build">
<h3><a class="toc-backref" href="#id12">Amazon EC2 AMI Build</a><a class="headerlink" href="#amazon-ec2-ami-build" title="Permalink to this headline">¶</a></h3>
<p>First follow the <a class="reference internal" href="#luajit-installation">LuaJIT installation</a> steps.</p>
<p>Create a standard EC2 AMI with a new security group. Open up all UDP and at least TCP Ports 1935 in the Security Group.</p>
<p>Connect to the AMI and execute the following script:</p>
<div class="highlight-sh"><div class="highlight"><pre>sudo -s
yum -y groupinstall <span class="s2">&quot;Development Tools&quot;</span>
yum -y groupinstall <span class="s2">&quot;Development Libraries&quot;</span>
yum -y install make
wget https://github.com/MonaSolutions/MonaServer/archive/master.zip
unzip Mona-master.zip
<span class="nb">cd </span>Mona-master
<span class="nb">cd </span>MonaBase
make
<span class="nb">cd</span> ..
<span class="nb">cd </span>MonaCore
make
<span class="nb">cd</span> ..
<span class="nb">cd </span>MonaServer
make
sudo ./MonaServer --daemon
</pre></div>
</div>
</div>
<div class="section" id="raspberry-pi-armv61-build">
<h3><a class="toc-backref" href="#id13">Raspberry PI (armv61) Build</a><a class="headerlink" href="#raspberry-pi-armv61-build" title="Permalink to this headline">¶</a></h3>
<p>You need to install a distibution where <strong>gcc 4.8.2</strong> is available. For now we have only found <a class="reference external" href="http://downloads.raspberrypi.org/raspbian_latest">Raspbian</a> upgraded to the distribution <em>jessie</em>. Here is the protocol to install it correctly :</p>
<ul class="simple">
<li>First download <a class="reference external" href="http://downloads.raspberrypi.org/raspbian_latest">Raspbian</a></li>
<li>Then write the distribution image on an SD Card (<a class="reference external" href="http://xmodulo.com/2013/11/write-raspberry-pi-image-sd-card.html">How to write Raspberry Pi image to SD card</a>)</li>
<li>Start the raspberry pi and install raspbian</li>
<li>Update the /etc/apt/sources.list to have at least jessie (rather than wheezy)</li>
<li>Run theses steps to upgrade <a class="reference external" href="http://downloads.raspberrypi.org/raspbian_latest">Raspbian</a> :</li>
</ul>
<div class="highlight-sh"><div class="highlight"><pre>sudo aptitude update
sudo aptitude dist-upgrade
sudo rpi-update
reboot
</pre></div>
</div>
<ul class="simple">
<li>Follow the <a class="reference internal" href="#luajit-installation">LuaJIT installation</a> steps</li>
<li>And then run <a class="reference internal" href="#unix-linux-osx-build">Unix (Linux/OSX) Build</a> steps</li>
</ul>
</div>
</div>
<div class="section" id="configurations">
<h2><a class="toc-backref" href="#id14">Configurations</a><a class="headerlink" href="#configurations" title="Permalink to this headline">¶</a></h2>
<p>MonaServer is statically configured by an optional configuration <em>MonaServer.ini</em> file to put in the installation folder.
Possible configurations are :</p>
<ul class="simple">
<li><strong>host</strong> : address like it will be seen by clients and other servers, this option is mandatory to make working all redirection features in multiple server configuration (see <a class="reference external" href="./scalability.html">Scalability and load-balancing</a>).</li>
<li><strong>socketBufferSize</strong> : allows to change the size in bytes of sockets reception and sending buffer. Increases this value if your operating system has a default value too lower for important loads.</li>
<li><strong>threads</strong> : indicates the number of threads which will be allocated in the pool of threads of Mona. Usually it have to be equal to (or greather than) the number of cores on the host machine (virtual or physic cores). By default, an auto-detection system tries to determinate its value, but it can be perfectible on machine who owns hyper-threading technology, or on some operating systems.</li>
</ul>
<div class="section" id="application">
<h3><a class="toc-backref" href="#id15">[application]</a><a class="headerlink" href="#application" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>dir</strong> : Directory containing <em>data</em> and <em>www</em>.</li>
</ul>
</div>
<div class="section" id="servers">
<h3><a class="toc-backref" href="#id16">[servers]</a><a class="headerlink" href="#servers" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>port</strong> : port to receive incoming server connection (in a multiple servers configuration, see <a class="reference external" href="./scalability.html">Scalability and load-balancing</a> for more details). If you don&#8217;t configure this port, MonaServer cannot establish a connection with it.</li>
</ul>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The exchange between servers is done in a unencrypted TCP way, so to avoid an attack by this incoming end point the <em>servers.port</em> should be protected by a firewall to allow just a connection by an other server and nothing else.</p>
</div>
<ul class="simple">
<li><strong>targets</strong> : list of MonaServer addresses (separated by semicolons) to connect on start-up. When the server will start, it will try to etablish a connection to these addresses every 10 seconds (see <a class="reference external" href="./scalability.html">Scalability and load-balancing</a> for more details). Each token can include arguments through as a query url form:</li>
</ul>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[servers]</span>
<span class="na">targets</span><span class="o">=</span><span class="s">192.168.0.2:1936?name=master&amp;arg=val;192.168.0.3:1936</span>
</pre></div>
</div>
<p>It will create dynamic properties on <em>server</em> object (see <em>server</em> object description of &#8220;Server application, api&#8221; page for more details).</p>
<div class="highlight-lua"><div class="highlight"><pre><span class="k">function</span> <span class="nf">onServerConnection</span><span class="p">(</span><span class="n">server</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">server</span><span class="p">.</span><span class="n">name</span><span class="o">==</span><span class="s2">&quot;</span><span class="s">master&quot;</span> <span class="k">then</span> <span class="c1">-- true here just for 192.168.0.2:1936 server</span>
                <span class="n">NOTE</span><span class="p">(</span><span class="s2">&quot;</span><span class="s">server master arg = &quot;</span><span class="o">..</span><span class="n">server</span><span class="p">.</span><span class="n">arg</span><span class="p">)</span> <span class="c1">-- displays here &quot;server master arg = val&quot;</span>
        <span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div>
<div class="section" id="rtmfp">
<h3><a class="toc-backref" href="#id17">[RTMFP]</a><a class="headerlink" href="#rtmfp" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>port</strong> : equals 1935 by default (RTMFP server default port), it is the port used by MonaServer to listen incoming RTMFP requests.</li>
<li><strong>keepaliveServer</strong> : time in seconds for periodically sending packets keep-alive with server, 15s by default (valid value is from 5s to 255s).</li>
<li><strong>keepalivePeer</strong> : time in seconds for periodically sending packets keep-alive between peers, 10s by default (valid value is from 5s to 255s).</li>
</ul>
</div>
<div class="section" id="rtmp">
<h3><a class="toc-backref" href="#id18">[RTMP]</a><a class="headerlink" href="#rtmp" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>port</strong> : equals 1935 by default (RTMP server default port), it is the port used by MonaServer to listen incoming RTMFP requests.</li>
</ul>
</div>
<div class="section" id="http">
<h3><a class="toc-backref" href="#id19">[HTTP]</a><a class="headerlink" href="#http" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>port</strong> : equals 1935 by default (RTMFP server default port), it is the port used by MonaServer to listen incoming RTMFP requests.</li>
<li><strong>timeout</strong> : 7 by default, it is the maximum time before server kills the connection when no data as been received.</li>
<li><strong>index</strong> : the default index file of HTTP protocol, if it is specified it will redirect each connection to this index.</li>
</ul>
</div>
<div class="section" id="websocket">
<h3><a class="toc-backref" href="#id20">[WebSocket]</a><a class="headerlink" href="#websocket" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>timeout</strong> : 120 by default, it is the maximum time before server kills the connection when no data as been received.</li>
</ul>
</div>
<div class="section" id="logs">
<h3><a class="toc-backref" href="#id21">[logs]</a><a class="headerlink" href="#logs" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><strong>directory</strong> : directory where the log files are written (<em>MonaServer/logs</em> by default).</li>
<li><strong>name</strong> : name of log files (<em>log</em> by default).</li>
<li><strong>rotation</strong> : number of files to keep in <em>logs</em> directory</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Maximum size of a file is 1Mb.</p>
</div>
</div>
<div class="section" id="sample-of-monaserver-ini">
<h3><a class="toc-backref" href="#id22">Sample of MonaServer.ini</a><a class="headerlink" href="#sample-of-monaserver-ini" title="Permalink to this headline">¶</a></h3>
<div class="highlight-ini"><div class="highlight"><pre><span class="c1">;MonaServer.ini</span>
<span class="na">socketBufferSize</span> <span class="o">=</span> <span class="s">114688</span>
<span class="k">[RTMFP]</span>
<span class="na">port</span> <span class="o">=</span> <span class="s">1985</span>
<span class="na">keepAlivePeer</span> <span class="o">=</span> <span class="s">10</span>
<span class="na">keepAliveServer</span> <span class="o">=</span> <span class="s">15</span>
<span class="k">[logs]</span>
<span class="na">name</span><span class="o">=</span><span class="s">log</span>
<span class="na">directory</span><span class="o">=</span><span class="s">C:/MonaServer/logs</span>
</pre></div>
</div>
<p>If this configuration file doesn&#8217;t exist, default values are used.</p>
</div>
</div>
<div class="section" id="launch">
<h2><a class="toc-backref" href="#id23">Launch</a><a class="headerlink" href="#launch" title="Permalink to this headline">¶</a></h2>
<div class="section" id="start">
<h3><a class="toc-backref" href="#id24">Start</a><a class="headerlink" href="#start" title="Permalink to this headline">¶</a></h3>
<p>MonaServer includes some argument launch options, but by default MonaServer is optimized for a production running. Command-line options are useful during development and test usage. To get full descriptions about the launch arguments start MonaServer with <em>/help</em> argument on Windows or <em>&#8211;help</em> on Unix system.</p>
<p>Otherwise, simply start the MonaServer application with administrative rights.</p>
<p>You can also start it as a Windows service:</p>
<div class="highlight-sh"><div class="highlight"><pre>MonaServer.exe /registerService <span class="o">[</span>/displayName<span class="o">=</span>MonaServer /description<span class="o">=</span><span class="s2">&quot;Open Source RTMFP Server&quot;</span> /startup<span class="o">=</span>automatic<span class="o">]</span>
</pre></div>
</div>
<p>Or an Unix daemon:</p>
<div class="highlight-sh"><div class="highlight"><pre>sudo ./MonaServer --daemon <span class="o">[</span>--pidfile<span class="o">=</span>/var/run/MonaServer.pid<span class="o">]</span>
</pre></div>
</div>
</div>
<div class="section" id="usage">
<h3><a class="toc-backref" href="#id25">Usage</a><a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p>Flash client connects to MonaServer by the classical NetConnection way:</p>
<div class="highlight-as3"><div class="highlight"><pre><span class="n">_netConnection</span><span class="o">.</span><span class="na">connect</span><span class="o">(</span><span class="s2">&quot;rtmfp://localhost/&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>Here the port has its default value 1935. If you configure a different port on MonaServer you have to indicate this port in the URL (after <em>localhost</em>, of course).</p>
<p>The path used allows you to connect for your desired <a class="reference external" href="./serveapp.html">Server Application</a>.</p>
<div class="highlight-as3"><div class="highlight"><pre><span class="n">_netConnection</span><span class="o">.</span><span class="na">connect</span><span class="o">(</span><span class="s2">&quot;rtmfp://localhost/myApplication&quot;</span><span class="o">);</span>
</pre></div>
</div>
<p>To learn more, read the <a class="reference external" href="./serveapp.html">Server Application</a> or <a class="reference external" href="./samples.html">Samples</a> page.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2014, Mathieu Poux &amp; Thomas Jammet.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2b2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>